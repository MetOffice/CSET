category: Quick Look
title: $VARNAME $MLEVEL Level Histogram Plot
description: |
  Extracts and plots the probability density of $MLEVEL hPa $VARNAME from a file at model level $MLEVEL. It uses matplotlib.pyplot.hist to plot the probability density so that the area under the histogram integrates to 1. stacked is set to True so the sum of the histograms is normalized to 1.

parallel:
  - operator: read.read_cube
    constraint:
      operator: constraints.combine_constraints
      variable_constraint:
        operator: constraints.generate_var_constraint
        varname: $VARNAME
      validity_time_constraint:
        operator: constraints.generate_time_constraint
        time_start: $VALIDITY_TIME
      pressure_level_constraint:
        operator: constraints.generate_level
        coordinate: "full_levels"
        levels: $MLEVEL

  - operator: write.write_cube_to_nc
    filename: intermediate/histogram


collate:
  - operator: read.read_cube
    filename_pattern: intermediate/*.nc

  - operator: write.write_cube_to_nc
    overwrite: True

  - operator: plot.plot_histogram_series
    series_coordinate: full_levels
    sequence_coordinate: time
