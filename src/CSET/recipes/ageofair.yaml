category: Diagnostics
title: $MODEL_NAME Age of Air Diagnostic at $AOA_PLEV
description: |
  Extracts data required for, and calculates the age of air diagnostic on a given pressure levels. This is then plotted on a map projection for each lead-time. A timeseries plot is also produced.

steps:
  - operator: read.read_cubes

  - operator: ageofair.compute_ageofair
    XWIND:
        operator: regrid.regrid_onto_xyspacing
        xspacing: 0.5
        yspacing: 0.5
        method: Linear
        incube:
            operator: filters.filter_cubes
            constraint:
                operator: constraints.generate_stash_constraint
                stash: m01s15i201
    YWIND:
        operator: regrid.regrid_onto_xyspacing
        xspacing: 0.5
        yspacing: 0.5
        method: Linear
        incube:
            operator: filters.filter_cubes
            constraint:
                operator: constraints.generate_stash_constraint
                stash: m01s15i202
    WWIND:
        operator: regrid.regrid_onto_xyspacing
        xspacing: 0.5
        yspacing: 0.5
        method: Linear
        incube:
            operator: filters.filter_cubes
            constraint:
                operator: constraints.generate_stash_constraint
                stash: m01s15i242
    GEOPOT:
        operator: regrid.regrid_onto_xyspacing
        xspacing: 0.5
        yspacing: 0.5
        method: Linear
        incube:
            operator: filters.filter_cubes
            constraint:
                operator: constraints.generate_stash_constraint
                stash: m01s16i202

    plev: $AOA_PLEV
    incW: $AOA_INCW
    cyclic: $AOA_CYCLIC

  - operator: write.write_cube_to_nc
    overwrite: True

  - operator: plot.spatial_contour_plot
