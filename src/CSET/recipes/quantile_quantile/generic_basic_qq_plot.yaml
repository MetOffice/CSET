category: Q-Q plots
title: Q-Q plot for $VARNAME between $BASE_MODEL and $OTHER_MODEL
description: Extracts $VARNAME, calculates quantiles, and plots $BASE_MODEL against $OTHER_MODEL.

steps:
  - operator: read.read_cubes
    file_paths: $INPUT_PATHS
    model_names: [$BASE_MODEL, $OTHER_MODEL]
    constraint:
      operator: constraints.combine_constraints
      variable_constraint:
        operator: constraints.generate_var_constraint
        varname: $VARNAME
      cell_methods_constraint:
        operator: constraints.generate_cell_methods_constraint
        cell_methods: []
        varname: $VARNAME
      level_constraint:
        operator: constraints.generate_level_constraint
        coordinate: $VERTICAL_COORDINATE
        levels: $LEVELS
    subarea_type: $SUBAREA_TYPE
    subarea_extent: $SUBAREA_EXTENT

  - operator: plot.qq_plot
    coordinate: $COORD_LIST
    percent: [0,0.001,0.01,0.1,1,5,10,15,20,25,30,40,50,60,70,75,80,85,90,95,98,99,99.9,99.99,99.999,100]
    one-to-one: $ONE_TO_ONE

  - operator: write.write_cube_to_nc
    overwrite: True
